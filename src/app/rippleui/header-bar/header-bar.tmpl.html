<!--
  ~  Copyright 2016 Ripple Foundation C.I.C. Ltd
  ~  
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~  
  ~    http://www.apache.org/licenses/LICENSE-2.0

  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->
<header class="header">
  <nav class="navbar">
    <div class="header-navbar">
      <a ng-click="$ctrl.goHome()" class="btn-header btn-header-prev"><i class="fa fa-arrow-left"></i></a>
      <div class="wrap-logo">
        <a ng-if="$ctrl.title" class="logo" ng-click="$ctrl.goHome()">
          <img class="logo-icon" alt="{{$ctrl.title}}">
          <span>{{$ctrl.title}}</span>
        </a>
      </div>

      <ul class="user-panel" role="tablist">
        <li ng-class="$ctrl.activeNavTab('searchBar')" ng-if="searchBar" class="visible-xs"><a class="btn-header" ng-click="$ctrl.changeNavTab('searchBar')">
          <i class="fa fa-search"></i></a>
        </li>
        <li ng-class="$ctrl.activeNavTab('notifications')"><a class="btn-header" ng-click="$ctrl.changeNavTab('notifications')">
          <i class="fa fa-bell-o"><span class="count">2</span></i></a>
        </li>
        <li ng-class="stateName === 'profile' ? 'active' : ''"><a class="btn-header btn-user" ng-click="$ctrl.goProfile()">
          <i class="fa fa-user"></i></a>
        </li>
      </ul>

      <!-- Nav Search -->
      <div class="wrap-header-search ng-cloak hidden-xs" ng-if="searchBar" ng-cloak ng-class="{'searchBarHidden' : !$ctrl.searchBarEnabled }">
        <div class="header-search">
          <button class="btn-header inverse btn-search" ng-click="$ctrl.searchFunction();"><i class="fa fa-search"></i></button>
          <div class="header-search-inner">
            <div ng-show="$root.searchMode" class="ng-cloak" ng-cloak>
              <span ng-cloak class="label ng-cloak report-label">
              <div ng-if="$root.reportMode">Reports&nbsp;</div>
              <div ng-if="$root.settingsMode">Setting&nbsp;</div>
              <div ng-if="$root.patientMode">Patients&nbsp;</div>
              <i ng-click="$ctrl.cancelSearchMode()" class="fa fa-times"></i></span>
            </div>
            <div ng-show="$root.reportTypeSet" class="ng-cloak" ng-cloak>
              <span ng-cloak class="label ng-cloak reportType-label">
              <div class="reportTypeSet">
                {{$root.reportTypeString}}&nbsp;
                <i ng-click="$ctrl.cancelReportType()" class="fa cancel-reportType fa-times"></i>
              </div>
              </span>
            </div>
            <div></div>
            <div class="holder">
              <input key-bind="{ enter: '$ctrl.searchFunction()', esc: '$ctrl.cancelSearchMode()' }" class="form-control" placeholder="Search" type="text" uib-typeahead="report for report in $ctrl.reportTypes | filter:$viewValue" ng-model="search.searchExpression" ng-keyup="$ctrl.checkExpression(search.searchExpression)" ng-trim="false" ng-class="{'moveRight': $root.searchMode && !$root.reportTypeSet, 'moveFurtherRight': $root.searchMode && $root.reportTypeSet}" focus-element="searchFocused"/>
              <i ng-show="search.searchExpression !== '' || $root.searchMode" ng-click="$ctrl.cancelSearchMode()" class="clearAll fa fa-times-circle"></i>
            </div>
          </div>
        </div>
        <!--  <div class="advanced-search-text pull-right" ng-if="searchBar">
          <a ng-click="$ctrl.openAdvancedSearch()">Advanced search</a>
        </div> -->
      </div>
      <!-- / Nav Search -->

      <!-- Nav Mobile Search -->
      <div class="wrap-header-search wrap-search clearfix ng-cloak" ng-if="searchBar && $ctrl.currentNavTab==='searchBar'" ng-cloak ng-class="{'searchBarHidden' : !$ctrl.searchBarEnabled }">
        <div class="header-search">
          <button class="btn-header secondary btn-search" ng-click="$ctrl.searchFunction();"><i class="fa fa-search"></i></button>
          <div class="header-search-inner">
            <div ng-show="$root.searchMode" class="ng-cloak" ng-cloak>
              <span ng-cloak class="label ng-cloak report-label">
              <div ng-if="$root.reportMode">Reports&nbsp;</div>
              <div ng-if="$root.settingsMode">Setting&nbsp;</div>
              <div ng-if="$root.patientMode">Patients&nbsp;</div>
              <i ng-click="$ctrl.cancelSearchMode()" class="fa fa-times"></i></span>
            </div>
            <div ng-show="$root.reportTypeSet" class="ng-cloak" ng-cloak>
              <span ng-cloak class="label ng-cloak reportType-label">
              <div class="reportTypeSet">
                {{$root.reportTypeString}}&nbsp;
                <i ng-click="$ctrl.cancelReportType()" class="fa cancel-reportType fa-times"></i>
              </div>
              </span>
            </div>
            <div></div>
            <div class="holder">
              <input key-bind="{ enter: '$ctrl.searchFunction()', esc: '$ctrl.cancelSearchMode()' }" class="form-control" placeholder="Search" type="text" uib-typeahead="report for report in $ctrl.reportTypes | filter:$viewValue" ng-model="search.searchExpression" ng-keyup="$ctrl.checkExpression(search.searchExpression)" ng-trim="false" ng-class="{'moveRight': $root.searchMode && !$root.reportTypeSet, 'moveFurtherRight': $root.searchMode && $root.reportTypeSet}" focus-element="searchFocused"/>
              <i ng-show="search.searchExpression !== '' || $root.searchMode" ng-click="$ctrl.cancelSearchMode()" class="clearAll fa fa-times-circle"></i>
            </div>
          </div>
        </div>
      </div>
      <!-- / Nav Mobile Search -->
    </div>

    <!-- Tab panes -->
    <div class="tab-content" ng-switch="currentNavTab">

      <!-- Notification -->
      <div ng-if="$ctrl.currentNavTab==='notifications'" class="pane row" id="tab-notifications">
        <div class="notifications-header">
          Notifications (2)
        </div>
        <div class="notifications-body">
          <ul>
            <li>
              <div class="notification-info">Information from Liquid Logic (Social Care) is currently unavailable.</div>
              <div class="notification-time">5 minutes ago</div>
            </li>
            <li>
              <div class="notification-info">Information from Liquid Logic (Social Care) is currently unavailable.</div>
              <div class="notification-time">5 minutes ago</div>
            </li>
          </ul>
        </div>
      </div>
      <!-- /.Notification -->

      <!-- User Profile -->
      <!-- <div ng-if="$ctrl.currentNavTab==='user'" class="pane row" id="tab-user">
        <div class="col-xs-12">

          <div class="user-type superuser">Super User</div>
          <div class="user-type clinician">Clinician</div>
          <div class="user-type patient">Patient</div>

          <div class="user-profile-image"><i class="fa fa-user"></i></div>
          <p class="header-title-mobile"><strong>User Name:</strong>{{$ctrl.user.given_name}} {{$ctrl.user.family_name}}</p>
          <p>{{$ctrl.user.role}}</p>
          <p>{{$ctrl.user.email}}</p>
          <p>10/05/2099</p>
        </div>
        <div class="col-xs-12 options">
          <ul>
            <li><a href="" class="btn">Settings</a></li>
            <li><a href="" class="btn">Admin Console</a></li>
          </ul>
          <ul>
            <li><a href="https://ripple-identity-uat.answerappcloud.com/signout" class="signout btn btn-danger">SIGN OUT  <i class="fa fa-sign-out"></i></a></li>
          </ul>
        </div>
      </div> -->
      <!-- /.User Profile -->

    </div>
    <!-- /.Tab panes -->
  </nav>
  
  <!-- Header toolbar -->
  <div class="wrap-header-toolbar" ng-if=userContextViewExists>
    <div class="container-fluid">
      <div class="header-toolbar">
        <button ng-click="$ctrl.clickSidebarBtn()" class="btn-toggle-sidebar wrap-icon" data-toggle="collapse" data-target="#sidebar-nav" aria-expanded="false">
          <i class="fa fa-bars"></i>
          <span>Menu</span>
        </button>
        <div ui-view="banner"></div>
      </div>
    </div>
  </div>

  <!-- <div class="wrap-header-toolbar">
    <div class="container-fluid">
      <div class="row header-toolbar">
        <div class="col-xs-2">
          <div class="innner">
            <span class="glyphicon glyphicon-arrow-left previous-page-arrow" ng-if="previousPage && currentUser.role=='idcr'" ng-click="goBack()"></span>
          </div>
        </div>
        <div class="col-xs-8 current-page-title-mobile">
          <div class="inner">
            <span>{{pageHeader}}</span>
          </div>
        </div>
        <div class="col-xs-2 text-right">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-nav" aria-expanded="false" ng-if=(userContextViewExists)>
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
      </div>
    </div>
  </div> -->
  <!-- /.Header toolbar-->

  <!-- <div class="row header-background ">

    <div class="col-md-3 col-sm-12 header-right"> -->
      <!-- User Profile -->
      <!-- <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown-profile" uib-dropdown>
            <a href="#" class="dropdown-toggle" uib-dropdown-toggle>
              <span class="glyphicon glyphicon-user"></span>
              <span class="header-title-3">Demonstration</span>
              <span class="glyphicon glyphicon-chevron-down"></span>
            </a>
            <ul class="dropdown-menu">
              <li>
                <div class="navbar-login">
                  <div class="row">
                    <div class="col-md-4 col-sm-4">
                      <div class="user-profile-image"><i class="glyphicon glyphicon-user"></i></div>
                    </div>
                    <div class="col-md-8 col-sm-8">
                      <p class="dropdown-profile-text"><b>{{$ctrl.user.given_name}} {{$ctrl.user.family_name}}</b></p>
                      <p class="dropdown-profile-text"><b>{{$ctrl.user.role}}</b></p>
                      <p class="dropdown-profile-text">{{$ctrl.user.email}}</p>
                      <p class="dropdown-profile-text">10/05/1984</p>
                    </div>
                  </div>
                </div>
              </li>
              <li class="divider"></li>
              <li>
                <div class="navbar-login navbar-login-session">
                  <div class="row">
                    <div class="col-lg-12">
                      <p>
                        <a class="btn btn-danger btn-block" ng-click="">Sign Out</a>
                      </p>
                    </div>
                  </div>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div> -->
      <!-- /.User Profile -->
    <!-- </div>
  </div> -->
</header>