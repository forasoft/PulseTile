<!--
  ~  Copyright 2016 Ripple Foundation C.I.C. Ltd
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0

  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->
<div class="modal-header">
  <h4 class="modal-title">{{ modal.title }}</h4>
</div>

<div class="modal-body">
<div id="chat">
  <div class="panel panel-default panel-chat">
    <div class="panel-heading">
      <h4 class="panel-title ng-binding" id="patientName"></h4>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4"><span>DOB:</span> <strong id="patientDob">{{currentPatient.dateOfBirth | date:'dd-MMM-yyyy' }}</strong></div>
        <div class="col-xs-4"><span>Gender:</span> <strong id="patientGender">{{currentPatient.gender}}</strong></div>
        <div class="col-xs-4"><span>NHS No.:</span> <strong id="patientNhs" ng-bind="currentPatient.nhsNumber | formatNHSNumber"></strong></div>
      </div>
    </div>
  </div>
  <div class="header-chat">
    <p class="title-chat">Video Call</p>
  </div>
  <div class="chat-wrapper">
    <div class="container">
      <div class="col-xs-12 col-sm-7 col-sm-push-5 video-chat-wrapper">
        <div class="video-wrapper">
          <video id="remoteVideo" class="inactive" autoplay></video>
          <video id="localVideo" class="inactive" autoplay muted></video>
          <div class="video-controller">
            <i class="fa fa-round fa-microphone" aria-hidden="true" id="muteAudio"></i>
            <!--<i class="fa fa-round fa-video-camera" aria-hidden="true"id="muteVideo"></i>-->
            <i class="fa fa-round fa-video-camera-2" aria-hidden="true" id="muteVideo"></i>
          </div>
          <i class="fa fa-volume-off fa-2x" aria-hidden="true" id="noSound" title="No sound"></i>

        </div>
        <div class="video-chat-controller">
          <!--<p>Please press End Call to close this appointment when you are finished</p>-->
          <button class="btn btn-danger" id="endCall" ng-click="confirmCall()" ng-if="!isCloseChat">End Call</button>
          <button class="btn btn-danger" id="closeWindow" ng-click="close()" ng-if="isCloseChat"><i class="fa fa-times-circle"></i> Close Window</button>
          <button class="btn btn-success" id="restartCall" ng-if="isCloseChat">Restart the call</button>
          <span id="callDuration">Connected - <span id="timer">00:00:00</span></span>
        </div>
      </div>
      <div class="col-xs-12 col-sm-5 col-sm-pull-7 messages-wrapper">
        <div class="info">
          <div class="row">
            <div class="col-xs-5">Care Service Team</div>
            <div class="col-xs-7" id="appointmentCst"></div>
          </div>
          <div class="row">
            <div class="col-xs-5">Location</div>
            <div class="col-xs-7" id="appointmentLocation"></div>
          </div>
        </div>
        <ul class="list-unstyled list-messages">
          <li ng-repeat="message in messages">{{message.time}} - {{message.author}}: {{message.text}}</li>
        </ul>
        <form action="" name="messageForm" id="sendMessage">
          <textarea name="iMessage" id="iMessage" rows="3" ng-model="msgText"></textarea>
        </form>
        <button class="btn btn-info" ng-click="formSubmitted = true; sendMsg(messageForm);"><i class="fa fa-pencil" ></i> Send</button>
      </div>
    </div>
  </div>

</div>
</div>

<div class="hidden" id="notificationSound"></div>

<!--&lt;!&ndash; build:js(.) scripts/appointment_vendor.js &ndash;&gt;-->
<!--<script src="bower_components/jquery/dist/jquery.js"></script>-->
<!--<script src="bower_components/moment/moment.js"></script>-->
<!--<script src="bower_components/socket.io-client/socket.io.js"></script>-->
<!--<script src="bower_components/webrtc-adapter/release/adapter.js"></script>-->
<!--&lt;!&ndash; endbuild &ndash;&gt;-->

<!--&lt;!&ndash; build:js({.tmp,app}) scripts/appointment_main.js &ndash;&gt;-->
<!--<script src="scripts/chat/main.js"></script>-->
<!--&lt;!&ndash; endbuild &ndash;&gt;-->

<!--</body>-->
<!--</html>-->
