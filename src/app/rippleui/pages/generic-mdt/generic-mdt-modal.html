<!--
  ~  Copyright 2015 Ripple OSI
  ~
  ~      Licensed under the Apache License, Version 2.0 (the "License");
  ~      you may not use this file except in compliance with the License.
  ~      You may obtain a copy of the License at
  ~
  ~          http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~      Unless required by applicable law or agreed to in writing, software
  ~      distributed under the License is distributed on an "AS IS" BASIS,
  ~      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~      See the License for the specific language governing permissions and
  ~      limitations under the License.
  ~
  -->

<div class="modal-header">
  <h4 class="modal-title">{{ modal.title }}</h4>
</div>

<div class="modal-body">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">{{ patient.name }}</h4>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-sm-4 text-left"><label>DOB:</label> <strong>{{ patient.dateOfBirth | date:'dd-MMM-yyyy' }}</strong></div>
        <div class="col-sm-4 text-center"><label>Gender:</label> <strong>{{ patient.gender }}</strong></div>
        <div class="col-sm-4 text-right"><label>NHS No:</label> <strong>{{ patient.nhsNumber | formatNHSNumber }}</strong></div>
      </div>
    </div>
  </div>

  <form name="genericMdtForm" class="genericMdtForm form-horizontal text-left" novalidate>
    <fieldset>
      <legend>{{ modal.title }}</legend>

      <!-- START col-md-6 -->
        <div class="row">
      <div class="col-md-6">

        <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || genericMdtForm.Service.$dirty) && genericMdtForm.Service.$invalid, 'has-success': genericMdtForm.Service.$valid && genericMdtForm.Service.$dirty}">
          <label for="Service" class="control-label col-md-12">Multidisciplinary Team</label>
          <div class="col-md-12">
            <div class="input-group">
              <input type="text" class="form-control input-sm" id="Service" name="Service" ng-model="genericMdt.serviceTeam" required />
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.Service.$error.required">You must enter a value.</span>
          </div>
        </div>

        <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || genericMdtForm.Date.$dirty) && genericMdtForm.Date.$invalid, 'has-success': genericMdtForm.Date.$valid && genericMdtForm.Date.$dirty}">
          <label for="Date" class="control-label col-md-12">Date of Request</label>
          <div class="col-md-12">
            <div class="input-group">
              <span class="input-group-btn">
              <button type="button" ng-click="openDatePicker($event, 'dateOfOnsetOpen')" class="btn btn-default btn-sm"><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="Date" name="Date" ng-model="genericMdt.dateOfRequest" ng-click="openDatePicker($event, 'dateOfOnsetOpen')" uib-datepicker-popup="dd-MMM-y" is-open="dateOfOnsetOpen" required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.Date.$error.required">You must enter a valid date.</span>
          </div>
        </div>

        <div class="form-group" ng-class="{'has-error': (formSubmitted || genericMdtForm.questionForMDT.$dirty) && genericMdtForm.questionForMDT.$invalid, 'has-success': genericMdtForm.questionForMDT.$valid && genericMdtForm.questionForMDT.$dirty}">
          <label for="questionForMDT" class="control-label col-md-12">Question For MDT</label>
          <div class="col-md-12">
            <div class="input-group">
              <textarea type="text" class="form-control" id="questionForMDT" name="questionForMDT" ng-model="genericMdt.question" required ></textarea>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.questionForMDT.$error.required">You must enter a value.</span>
          </div>
        </div>
    </div>
      <!-- END col-md-6 -->      <!-- START col-md-6 -->
<div class="col-md-6 ">
    <div class="row">
    <div class="col-md-12">
<div class="form-group  form-group-sm mdtLinkGroup">
<label class="control-label">Link to MDT Web Service Directory</label>
   <div class="input-group">
      <div class="input-group-btn" uib-dropdown>
        <button type="button" class="btn linkButton btn-default btn-dropdown-toggle" uib-dropdown-toggle aria-haspopup="true" aria-expanded="false">{{protocol}} <span class="caret"></span></button>
        <ul class="dropdown-menu" >
          <li ng-click="changeProtocol('http')" >Http://</li>
          <li ng-click="changeProtocol('https')">Https://</li>
        </ul>
      </div>
      <input type="text" class="form-control input-sm" placeholder="https://www.mdtwebservicedirectory.com?123080s9ijass" aria-label="...">
    </div>
</div>
    </div>
    </div>
    <div class="row">
           <div class="col-md-8">
                 <div class="form-group  form-group-sm" ng-class="{'has-error': (formSubmitted || genericMdtForm.dateofmeeting.$dirty) && genericMdtForm.dateofmeeting.$invalid, 'has-success': genericMdtForm.dateofmeeting.$valid && genericMdtForm.dateofmeeting.$dirty}">
          <label for="dateofmeeting" class="control-label col-md-12">Date of Meeting</label>
          <div class="col-md-12">
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" ng-click="openDatePicker($event, 'dateOfMeetingPicker')" class="btn btn-default btn-sm"><i class="fa fa-calendar"></i></button>
            </span>
              <input type="text" class="form-control" id="dateofmeeting" name="dateofmeeting" ng-model="genericMdt.dateOfMeeting" ng-click="openDatePicker($event, 'dateOfMeetingPicker')" uib-datepicker-popup="dd-MMM-y" is-open="dateOfMeetingPicker" required/>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.dateofmeeting.$error.required">You must enter a valid date.</span>
          </div>
        </div>
    </div>
                    <div class="col-md-4">
                  <div class="form-group form-group-sm" ng-class="{'has-error': (formSubmitted || genericMdtForm.timeofmeeting.$dirty) && genericMdtForm.timeofmeeting.$invalid, 'has-success': genericMdtForm.timeofmeeting.$valid && genericMdtForm.timeofmeeting.$dirty}">
          <label for="timeofmeeting" class="control-label col-md-12">Time</label>
          <div class="col-md-12">
            <div class="input-group">
                 <span class="input-group-btn">
              <button type="button" class="btn btn-default btn-sm"><i class="fa fa-clock-o"></i></button>
            </span>
              <input type="text" class="form-control input-sm" ui-timepicker id="timeofmeeting" name="timeofmeeting"  ng-model="genericMdt.timeOfMeeting"  required />
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.timeofmeeting.$error.required">You must enter a valid time.</span>
          </div>
        </div>
         </div>
    </div>
    <div class="row">
              <div class="col-md-12">
               <div class="form-group" ng-class="{'has-error': (formSubmitted || genericMdtForm.meetingdiscussion.$dirty) && genericMdtForm.meetingdiscussion.$invalid, 'has-success': genericMdtForm.meetingdiscussion.$valid && genericMdtForm.meetingdiscussion.$dirty}">
          <label for="Notes" class="control-label col-md-12">Meeting Discussion</label>
          <div class="col-md-12">
            <div class="input-group">
              <textarea class="form-control input-sm" id="meetingdiscussion" name="meetingdiscussion" ng-model="genericMdt.notes" required></textarea>
            </div>
            <span class="help-block animate-fade" ng-show="formSubmitted && genericMdtForm.meetingdiscussion.$error.required">You must enter a value.</span>
          </div>
        </div>
    </div>
</div>
</div>
     </div>
      <!-- END col-md-6 -->

    </fieldset>
  </form>
</div>

<div class="modal-footer">
  <a class="btn btn-danger" ng-click="cancel()">Cancel</a>
  <button class="btn btn-success" ng-click="formSubmitted = true; ok(genericMdtForm, genericMdt);"><i class="fa fa-check"></i> Complete</button>
</div>


